<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shareable Weather Cards</title>
  <meta name="description" content="Create and share beautiful weather cards for any location. Get current conditions, forecasts, and radar maps in a shareable format.">
  <meta name="keywords" content="weather, forecast, shareable, weather cards, current conditions, radar, temperature, weather app">
  <meta name="author" content="herzog.tech">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://weather.gripe/">
  <meta property="og:title" content="weather.gripe â€” Shareable Weather Cards">
  <meta property="og:description" content="Create and share beautiful weather cards for any location. Get current conditions, forecasts, and radar maps.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://weather.gripe/">
  <meta property="og:site_name" content="weather.gripe">
  <meta property="og:locale" content="en_US">

  <script>
    (function() {
      let theme;
      try { theme = localStorage.getItem('theme'); } catch(e) {}
      if (theme === 'dark' || (!theme && matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('wa-dark');
      }
    })();
  </script>
</head>
<body class="min-h-screen">
  <header class="sticky top-0 z-50" style="background: var(--wa-color-surface-raised); border-bottom: 1px solid var(--wa-color-neutral-border-normal);">
    <nav class="max-w-6xl mx-auto px-4 flex wa-align-items-center justify-between" style="padding-top: var(--wa-space-s); padding-bottom: var(--wa-space-s);">
      <strong style="font-size: var(--wa-font-size-l); font-weight: var(--wa-font-weight-bold);">weather.gripe</strong>
      <div class="flex wa-align-items-center wa-gap-m">
        <!-- Unit Toggle -->
        <wa-tooltip for="units-metric">Celsius, km/h</wa-tooltip>
        <wa-tooltip for="units-imperial">Fahrenheit, mph</wa-tooltip>
        <wa-button-group aria-label="Temperature unit selection">
          <wa-button id="units-metric" size="small" appearance="outlined" variant="brand" aria-label="Switch to metric units (Celsius, km/h)">Metric</wa-button>
          <wa-button id="units-imperial" size="small" class="temp-gradient-btn" aria-label="Switch to imperial units (Fahrenheit, mph)">Imperial</wa-button>
        </wa-button-group>
        <!-- Dark Mode Toggle -->
        <wa-tooltip id="dark-mode-tooltip" for="dark-mode-toggle">Switch to dark mode</wa-tooltip>
        <wa-button id="dark-mode-toggle" appearance="plain" size="small" aria-label="Switch to dark mode">
          <wa-icon name="moon" aria-hidden="true"></wa-icon>
        </wa-button>
        <script>
          (function() {
            const btn = document.getElementById('dark-mode-toggle');
            const icon = btn.querySelector('wa-icon');
            const tooltip = document.getElementById('dark-mode-tooltip');
            const update = function() {
              const isDark = document.documentElement.classList.contains('wa-dark');
              icon.setAttribute('name', isDark ? 'sun' : 'moon');
              const label = isDark ? 'Switch to light mode' : 'Switch to dark mode';
              btn.setAttribute('aria-label', label);
              if (tooltip) tooltip.textContent = label;
            };
            update();
            btn.addEventListener('click', function() {
              const isDark = document.documentElement.classList.toggle('wa-dark');
              try { localStorage.setItem('theme', isDark ? 'dark' : 'light'); } catch(e) {}
              update();
            });
          })();
        </script>
      </div>
    </nav>
  </header>

  <main class="max-w-6xl mx-auto px-4" style="padding-top: var(--wa-space-xl); padding-bottom: var(--wa-space-xl);">
    <!-- Search Section -->
    <section id="search-section" class="relative mb-6">
      <wa-combobox
        id="search-combobox"
        placeholder="Search Location..."
        size="large"
        pill
        autocomplete="none"
        aria-label="Search for a location"
      >
        <wa-icon slot="start" name="magnifying-glass" aria-hidden="true"></wa-icon>
        <wa-tooltip for="location-reset-btn">Return to detected location</wa-tooltip>
        <wa-button id="location-reset-btn" slot="end" appearance="plain" size="small" hidden aria-label="Return to detected location">
          <wa-icon name="location-crosshairs" aria-hidden="true"></wa-icon>
        </wa-button>
      </wa-combobox>
    </section>

    <!-- Current Location Display -->
    <section id="location-display" class="mb-6" hidden>
      <h2 id="location-name" style="font-size: var(--wa-font-size-2xl); font-weight: var(--wa-font-weight-bold);"></h2>
    </section>

    <!-- Error State -->
    <section id="error-state" hidden>
      <wa-callout variant="danger">
        <wa-icon slot="icon" name="triangle-exclamation" aria-hidden="true"></wa-icon>
        <strong>Error</strong>
        <p id="error-message"></p>
        <wa-button id="error-retry" variant="danger" size="small" style="margin-top: var(--wa-space-s);" aria-label="Retry loading weather data">Try Again</wa-button>
      </wa-callout>
    </section>

    <!-- Weather Cards Masonry -->
    <section id="weather-cards" class="columns-1 columns-2 columns-3 masonry-gap">
      <!-- Skeleton cards using wa-skeleton -->
      <wa-card class="weather-card" data-card-type="skeleton-current">
        <wa-skeleton slot="media" effect="sheen" class="skeleton-current"></wa-skeleton>
        <div slot="footer" class="flex wa-gap-xs">
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
        </div>
      </wa-card>
      <wa-card class="weather-card" data-card-type="skeleton-day">
        <wa-skeleton slot="media" effect="sheen" class="skeleton-day"></wa-skeleton>
        <div slot="footer" class="flex wa-gap-xs">
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
        </div>
      </wa-card>
      <wa-card class="weather-card" data-card-type="skeleton-forecast">
        <wa-skeleton slot="media" effect="sheen" class="skeleton-forecast"></wa-skeleton>
        <div slot="footer" class="flex wa-gap-xs">
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
        </div>
      </wa-card>
    </section>
  </main>

  <footer id="site-footer" style="border-top: 1px solid var(--wa-color-neutral-border-normal); margin-top: var(--wa-space-3xl); padding: var(--wa-space-l) 0;" hidden>
    <small class="block max-w-6xl mx-auto px-4 text-center" style="font-size: var(--wa-font-size-s); color: var(--wa-color-text-quiet);">
      Weather via <span id="data-source"></span> |
      Photos from <a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer" class="footer-link" aria-label="Unsplash (opens in new tab)">Unsplash</a> |
      <wa-icon name="heart" aria-label="Made with love by" style="color: var(--color-primary);"></wa-icon>
      <a href="https://herzog.tech" target="_blank" rel="noopener noreferrer" class="footer-link" aria-label="herzog.tech (opens in new tab)">herzog.tech</a>
    </small>
  </footer>

  <script type="module" src="/main.js"></script>
</body>
</html>
