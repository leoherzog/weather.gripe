<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shareable Weather Cards</title>
  <meta name="description" content="Create and share beautiful weather cards for any location. Get current conditions, forecasts, and radar maps in a shareable format.">
  <meta name="keywords" content="weather, forecast, shareable, weather cards, current conditions, radar, temperature, weather app">
  <meta name="author" content="herzog.tech">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://weather.gripe/">
  <meta property="og:title" content="weather.gripe â€” Shareable Weather Cards">
  <meta property="og:description" content="Create and share beautiful weather cards for any location. Get current conditions, forecasts, and radar maps.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://weather.gripe/">
  <meta property="og:site_name" content="weather.gripe">
  <meta property="og:locale" content="en_US">

  <!-- PWA -->
  <meta name="theme-color" content="#ffd700">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="weather.gripe">
  <link rel="manifest" href="/manifest.json">

  <!-- Icons -->
  <link rel="icon" href="/icons/favicon.ico" sizes="32x32">
  <link rel="icon" href="/icons/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9544720367752359" crossorigin="anonymous"></script>

  <script>
    (function() {
      let theme;
      try { theme = localStorage.getItem('theme'); } catch(e) {}
      if (theme === 'dark' || (!theme && matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('wa-dark');
      }
    })();
  </script>
</head>
<body class="min-h-screen">
  <header class="site-header sticky top-0 z-50">
    <nav class="site-nav max-w-6xl mx-auto px-4 wa-split wa-align-items-center">
      <div class="wa-cluster wa-gap-xs">
        <wa-icon library="duotone" name="poo-storm" class="header-logo-icon"></wa-icon>
        <h1 class="site-title">weather.gripe</h1>
      </div>
      <div class="wa-cluster wa-gap-m">
        <!-- Unit Toggle -->
        <wa-tooltip for="units-metric" placement="bottom">Celsius, km/h</wa-tooltip>
        <wa-tooltip for="units-imperial" placement="bottom">Fahrenheit, mph</wa-tooltip>
        <wa-radio-group id="unit-toggle" label="Temperature unit selection" orientation="horizontal" size="small">
          <wa-radio id="units-metric" value="metric" appearance="button">Metric</wa-radio>
          <wa-radio id="units-imperial" value="imperial" appearance="button">Imperial</wa-radio>
        </wa-radio-group>
        <!-- Dark Mode Toggle -->
        <wa-tooltip id="dark-mode-tooltip" for="dark-mode-toggle" placement="bottom">Switch to dark mode</wa-tooltip>
        <wa-button id="dark-mode-toggle" appearance="plain" size="small">
          <wa-icon name="moon" label="Switch to dark mode"></wa-icon>
        </wa-button>
        <script>
          (function() {
            const btn = document.getElementById('dark-mode-toggle');
            const icon = btn.querySelector('wa-icon');
            const tooltip = document.getElementById('dark-mode-tooltip');
            const update = function() {
              const isDark = document.documentElement.classList.contains('wa-dark');
              icon.setAttribute('name', isDark ? 'sun' : 'moon');
              const label = isDark ? 'Switch to light mode' : 'Switch to dark mode';
              icon.setAttribute('label', label);
              if (tooltip) tooltip.textContent = label;
            };
            update();
            btn.addEventListener('click', function() {
              const isDark = document.documentElement.classList.toggle('wa-dark');
              try { localStorage.setItem('theme', isDark ? 'dark' : 'light'); } catch(e) {}
              update();
            });
          })();
        </script>
      </div>
    </nav>
  </header>

  <main class="site-main max-w-6xl mx-auto px-4">
    <!-- Search Section -->
    <search id="search-section" class="relative mb-6">
      <wa-tooltip for="location-reset-btn">Return to detected location</wa-tooltip>
      <wa-combobox
        id="search-combobox"
        placeholder="Search Location..."
        size="large"
        pill
        autocomplete="none"
        aria-label="Search for a location"
      >
        <wa-icon slot="start" name="magnifying-glass"></wa-icon>
        <wa-button id="location-reset-btn" slot="end" appearance="plain" size="small" hidden>
          <wa-icon name="location-crosshairs" label="Return to detected location"></wa-icon>
        </wa-button>
      </wa-combobox>
    </search>

    <!-- Current Location Display -->
    <section id="location-display" class="mb-6" hidden>
      <h2 id="location-name" class="location-heading"></h2>
    </section>

    <!-- Error State -->
    <section id="error-state" hidden>
      <wa-callout variant="danger">
        <wa-icon slot="icon" name="triangle-exclamation"></wa-icon>
        <strong>Error</strong>
        <p id="error-message"></p>
        <wa-button id="error-retry" variant="danger" size="small" class="mt-s" aria-label="Retry loading weather data">Try Again</wa-button>
      </wa-callout>
    </section>

    <!-- Weather Cards Masonry -->
    <section id="weather-cards" class="columns-1 columns-2 columns-3 masonry-gap">
      <!-- Skeleton cards using wa-skeleton -->
      <wa-card class="weather-card" data-card-type="skeleton-current">
        <wa-skeleton slot="media" effect="sheen" class="skeleton-current"></wa-skeleton>
        <div slot="footer" class="wa-cluster wa-gap-xs">
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
        </div>
      </wa-card>
      <wa-card class="weather-card" data-card-type="skeleton-day">
        <wa-skeleton slot="media" effect="sheen" class="skeleton-day"></wa-skeleton>
        <div slot="footer" class="wa-cluster wa-gap-xs">
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
        </div>
      </wa-card>
      <wa-card class="weather-card" data-card-type="skeleton-forecast">
        <wa-skeleton slot="media" effect="sheen" class="skeleton-forecast"></wa-skeleton>
        <div slot="footer" class="wa-cluster wa-gap-xs">
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
          <wa-skeleton effect="sheen" class="flex-1 h-9"></wa-skeleton>
        </div>
      </wa-card>
    </section>
  </main>

  <footer id="site-footer" class="site-footer" hidden>
    <small class="footer-text block max-w-6xl mx-auto px-4 text-center">
      Weather via <span id="data-source"></span> |
      Photos from <a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer" class="footer-link" aria-label="Unsplash (opens in new tab)">Unsplash</a> |
      <wa-icon name="heart" label="Made with love by" class="accent-icon"></wa-icon>
      <a href="https://herzog.tech" target="_blank" rel="noopener noreferrer" class="footer-link" aria-label="herzog.tech (opens in new tab)">herzog.tech</a>
    </small>
  </footer>

  <!-- PWA Install Prompt (controlled via JS, not auto-shown) -->
  <pwa-install
    manual-chrome
    manual-apple
    install-description="Get instant access to shareable weather cards">
  </pwa-install>

  <script type="module" src="/main.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js');
    }
  </script>
</body>
</html>
